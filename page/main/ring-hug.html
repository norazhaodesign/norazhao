<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Ring Hug</title>
</head>

<body>
<script src="/js/three.min.js"></script>
<script src="/js/orbit-controls.js"></script>
<style>
  html, body {margin:0; padding:0; overflow: hidden; height: 100%; width: 100%;}
</style>

<div id = "webgl"></div>
<script>
  // scene
  var scene = new THREE.Scene();

  // camera
  var camera = new THREE.PerspectiveCamera(45, window.innerWidth/window.innerHeight, 0.1, 1000);
  camera.position.set(0, 0, 22);
  camera.lookAt(new THREE.Vector3(0, 0, 0));

  // responsive
  window.addEventListener("resize", onWindowResize, false);
  function onWindowResize() {
    camera.aspect = window.innerWidth / window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
  }


  // define geometry
  function getSphere(x, y, z) {
    var geometry = new THREE.SphereGeometry(x, y, z);
    var material = new THREE.MeshLambertMaterial({
      color: 0xffffff,
      transparent: true,
      opacity: 1,
    });
    var mesh = new THREE.Mesh(geometry, material);
    return mesh;
  }
  function getTorus(a, b, c, d) {
    var geometry = new THREE.TorusGeometry(a, b, c, d);
    var material = new THREE.MeshLambertMaterial({
      color: 0xffffff,
      transparent: true,
      opacity: 1,
    });
    var mesh = new THREE.Mesh(geometry, material);
    return mesh;
  }
  function getIcosahedron(e, f) {
    var geometry = new THREE.IcosahedronGeometry(e, f);
    var material = new THREE.MeshLambertMaterial({
      color: 0xffffff,
      transparent: true,
      opacity: 1,
    });
    var mesh = new THREE.Mesh(geometry, material);
    return mesh;
  }

  // place geometry
  // getSphere(radius, widthSegments, heightSegments)
  // getTorus(radius, tube, radialSegments, tubularSegments)
  // getIcosahedron(radius, detail)
  var [obj1, obj2, obj3, obj4, obj5, obj6] = [
    getTorus(6.5, 1.2, 200, 6),
    getTorus(6.5, 1.2, 200, 6),
    getTorus(6.5, 1.2, 200, 6), 
    getTorus(6.5, 1.2, 200, 6),
    getTorus(6.5, 1.2, 200, 6),
    getTorus(6.5, 1.2, 200, 6)]

  var group = new THREE.Group();
  group.add(obj1, obj2, obj3, obj4, obj5, obj6);
  group.position.set(0, 0, 0);
  group.scale.set(1, 1, 1);

  // add lighting
  const light1 = new THREE.HemisphereLight('rgb(255, 255, 255)', 'rgb(255, 255, 0)', 1);
  const light2 = new THREE.DirectionalLight('rgb(255, 255, 255)', 3);
  light2.position.set(-2, -10, 0)
  const light3 = new THREE.DirectionalLight('rgb(153, 0, 255)', 1);
  light3.position.set(10, 2, 2)
  light2.castShadow = true;
  scene.add(light1, light2, light3);

  // initial rotation status
  obj1.rotation.set(Math.random() * Math.PI * 2, Math.random() * Math.PI * 2, Math.random() * Math.PI * 2);
  obj2.rotation.set(Math.random() * Math.PI * 2, Math.random() * Math.PI * 2, Math.random() * Math.PI * 2);
  obj3.rotation.set(Math.random() * Math.PI * 2, Math.random() * Math.PI * 2, Math.random() * Math.PI * 2);
  obj4.rotation.set(Math.random() * Math.PI * 2, Math.random() * Math.PI * 2, Math.random() * Math.PI * 2);
  obj5.rotation.set(Math.random() * Math.PI * 2, Math.random() * Math.PI * 2, Math.random() * Math.PI * 2);
  obj6.rotation.set(Math.random() * Math.PI * 2, Math.random() * Math.PI * 2, Math.random() * Math.PI * 2);

  scene.add(group);

  // render
  var renderer = new THREE.WebGLRenderer({preserveDrawingBuffer: true});
  renderer.setSize(window.innerWidth, window.innerHeight);
  renderer.setClearColor('rgb(245,248,255)');
  document.getElementById('webgl').appendChild(renderer.domElement);

  // orbit control
  var controls = new THREE.OrbitControls(camera, renderer.domElement);
  controls.enableZoom = false;

  // update
  var clock = new THREE.Clock();

  // bigger > rotation faster
  var [n1, n2, n3, n4, n5, n6, n7, n8, n9, n10, n11, n12, n13, n14, n15, n16, n17, n18] = [
    Math.random() * 0.0004 + 0.002, Math.random() * 0.0004 + 0.002, Math.random() * 0.0004 + 0.002, 
    Math.random() * 0.0004 + 0.002, Math.random() * 0.0004 + 0.002, Math.random() * 0.0004 + 0.002, 
    Math.random() * 0.0004 + 0.002, Math.random() * 0.0004 + 0.002, Math.random() * 0.0004 + 0.002, 
    Math.random() * 0.0004 + 0.002, Math.random() * 0.0004 + 0.002, Math.random() * 0.0004 + 0.002, 
    Math.random() * 0.0004 + 0.002, Math.random() * 0.0004 + 0.002, Math.random() * 0.0004 + 0.002, 
    Math.random() * 0.0004 + 0.002, Math.random() * 0.0004 + 0.002, Math.random() * 0.0004 + 0.002];

  var randomR1 = (Math.PI * 2) * Math.random();
  var randomG1 = (Math.PI * 2) * Math.random();
  var randomB1 = (Math.PI * 2) * Math.random();
  var randomR2 = (Math.PI * 2) * Math.random();
  var randomG2 = (Math.PI * 2) * Math.random();
  var randomB2 = (Math.PI * 2) * Math.random();
  var randomR3 = (Math.PI * 2) * Math.random();
  var randomG3 = (Math.PI * 2) * Math.random();
  var randomB3 = (Math.PI * 2) * Math.random();
  var randomR4 = (Math.PI * 2) * Math.random();
  var randomG4 = (Math.PI * 2) * Math.random();
  var randomB4 = (Math.PI * 2) * Math.random();
  var randomR5 = (Math.PI * 2) * Math.random();
  var randomG5 = (Math.PI * 2) * Math.random();
  var randomB5 = (Math.PI * 2) * Math.random();
  var randomR6 = (Math.PI * 2) * Math.random();
  var randomG6 = (Math.PI * 2) * Math.random();
  var randomB6 = (Math.PI * 2) * Math.random();

  // bigger > color change slower
  var [t1, t2, t3, t4, t5, t6, t7, t8, t9, t10, t11, t12, t13, t14, t15, t16, t17, t18] = [
    Math.random() + 5, Math.random() + 5, Math.random() + 5, 
    Math.random() + 5, Math.random() + 5, Math.random() + 5, 
    Math.random() + 5, Math.random() + 5, Math.random() + 5, 
    Math.random() + 5, Math.random() + 5, Math.random() + 5, 
    Math.random() + 5, Math.random() + 5, Math.random() + 5, 
    Math.random() + 5, Math.random() + 5, Math.random() + 5];

  var update = function() {

    obj1.rotation.x -= n1; obj1.rotation.y += n2; obj1.rotation.z -= n3;
    obj2.rotation.x += n4; obj2.rotation.y -= n5; obj2.rotation.z -= n6;
    obj3.rotation.x -= n7; obj3.rotation.y += n8; obj3.rotation.z += n9;
    obj4.rotation.x += n10; obj4.rotation.y -= n11; obj4.rotation.z += n12;
    obj5.rotation.x -= n13; obj5.rotation.y += n14; obj5.rotation.z -= n15;
    obj6.rotation.x -= n16; obj6.rotation.y += n17; obj6.rotation.z -= n18;

    var timeElapsed = clock.getElapsedTime();

    // colour change control
      var r1 = Math.floor((Math.sin(timeElapsed/t1 + randomR1) +1) /2 * 100 + 56);
      var g1 = Math.floor((Math.sin(timeElapsed/t2 + randomG1) +1) /2 * 100 + 56);
      var b1 = Math.floor((Math.sin(timeElapsed/t3 + randomB1) +1) /2 * 100 + 56);
      obj1.material.color.set('rgb('+r1+','+g1+','+b1+')');

      var r2 = Math.floor((Math.sin(timeElapsed/t4 + randomR2) +1) /2 * 156 + 100);
      var g2 = Math.floor((Math.sin(timeElapsed/t5 + randomG2) +1) /2 * 156 + 100);
      var b2 = Math.floor((Math.sin(timeElapsed/t6 + randomB2) +1) /2 * 156 + 100);
      obj2.material.color.set('rgb('+r2+','+g2+','+b2+')');

      var r3 = Math.floor((Math.sin(timeElapsed/t7 + randomR3) +1) /2 * 156 + 100);
      var g3 = Math.floor((Math.sin(timeElapsed/t8 + randomG3) +1) /2 * 156 + 100);
      var b3 = Math.floor((Math.sin(timeElapsed/t9 + randomB3) +1) /2 * 156 + 100);
      obj3.material.color.set('rgb('+r3+','+g3+','+b3+')');

      var r4 = Math.floor((Math.sin(timeElapsed/t10 + randomR4) +1) /2 * 156 + 100);
      var g4 = Math.floor((Math.sin(timeElapsed/t11 + randomG4) +1) /2 * 156 + 100);
      var b4 = Math.floor((Math.sin(timeElapsed/t12 + randomB4) +1) /2 * 156 + 100);
      obj4.material.color.set('rgb('+r4+','+g4+','+b4+')');

      var r5 = Math.floor((Math.sin(timeElapsed/t13 + randomR5) +1) /2 * 156 + 100);
      var g5 = Math.floor((Math.sin(timeElapsed/t14 + randomG5) +1) /2 * 156 + 100);
      var b5 = Math.floor((Math.sin(timeElapsed/t15 + randomB5) +1) /2 * 156 + 100);
      obj5.material.color.set('rgb('+r5+','+g5+','+b5+')');

      var r6 = Math.floor((Math.sin(timeElapsed/t16 + randomR6) +1) /2 * 156 + 100);
      var g6 = Math.floor((Math.sin(timeElapsed/t17 + randomG6) +1) /2 * 156 + 100);
      var b6 = Math.floor((Math.sin(timeElapsed/t18 + randomB6) +1) /2 * 156 + 100);
      obj6.material.color.set('rgb('+r6+','+g6+','+b6+')');

    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.setPixelRatio(window.devicePixelRatio); // resolution for hd-dpi devices
    renderer.render (scene, camera);
    setTimeout( function() { requestAnimationFrame (function() {
      update(scene, camera);
    }) }, 1000 / 60 );
  }

  update();
</script>
</body>
</html>